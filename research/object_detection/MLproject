name: cv-tfodapi

conda_env: conda.yml

entry_points:
  train_tf1:
    parameters:
      model_dir: path
      pipeline_config_path: path
      num_train_steps: {type: int, default: None}
      eval_training_data: {type: string, default: "False"}
      sample_1_of_n_eval_examples: {type: int, default: 1}
      sample_1_of_n_eval_on_train_examples: {type: int, default: 5}
      checkpoint_dir: {type: path, default: None}
      run_once: {type: string, default: "False"}
      max_eval_retries: {type: int, default: 0}


    command: >
      pip install -e ./ &&
      python model_main.py
      --model_dir {model_dir}
      --pipeline_config_path {pipeline_config_path}
      --num_train_steps {num_train_steps}
      --eval_training_data {eval_training_data}
      --sample_1_of_n_eval_examples {sample_1_of_n_eval_examples}
      --sample_1_of_n_eval_on_train_examples {sample_1_of_n_eval_on_train_examples}
      --checkpoint_dir {checkpoint_dir}
      --run_once {run_once}
      --max_eval_retries {max_eval_retries}


